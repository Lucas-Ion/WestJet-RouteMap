{"ast":null,"code":"import \"leaflet/dist/leaflet.css\";\nimport * as L from 'leaflet';\nimport 'leaflet.markercluster';\nimport 'leaflet.markercluster/dist/MarkerCluster.css';\nimport 'leaflet.markercluster/dist/MarkerCluster.Default.css';\nimport westjet from '../assets/westjet.png';\nexport default {\n  name: 'DestMap',\n  props: {\n    dests: Array\n  },\n  // components: {\n  //   LMap,\n  //   LTileLayer,\n  //   LMarker,\n  //   LIcon,\n  //   LTooltip,\n  // },\n  data() {\n    return {\n      url: 'https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png',\n      attribution: '&copy; <a target=\"_blank\" href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n      zoom: 4,\n      center: [47.313220, -1.319482],\n      //default\n      markerLatLngBob: [47.313220, -17.319482],\n      icon: westjet,\n      iconSize: [85, 50],\n      searchQuery: '',\n      noWrap: true\n    };\n  },\n  methods: {\n    latLng: function (lat, lng) {\n      return [lat, lng];\n    },\n    getLocation: function () {\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(position => {\n          var latitude = position.coords.latitude;\n          var longitude = position.coords.longitude;\n          this.center = [latitude, longitude];\n        });\n      }\n    },\n    search(searchQuery, dests) {\n      for (var index in dests) {\n        var search = searchQuery.toLowerCase();\n        var destination = dests[index].name.toLowerCase();\n        if (destination.includes(search))\n          // search centers at the first substring result\n          {\n            this.center = [dests[index].latitude, dests[index].longitude];\n            return;\n          }\n      }\n    },\n    openPopup: async function (e) {\n      let marker = e.target;\n      let dest = marker.options.dest;\n      //console.log(marker.options.dest.code)\n      const price = await this.getPrice(dest.code);\n      const valid_image = await this.getValidImage(dest.code);\n      let popupContent = `<h1 class ='h6 text-center'> ${dest.name} <br> $${price} </h1> <br>`;\n      console.log(dest);\n\n      // console.log(this.getValidImage(dest.code))\n\n      //   if (valid_image) {\n      //     console.log(\"here! boss\")\n      let imageSource = `<img src=\"https://www.westjet.com/assets/wj-web/images/en/destination-defaults/square/${dest.code.toLowerCase()}-square.jpg\"  width=\"200\" \n       height=\"200\" border-radius: 50%;> </img> <br>`;\n      //   } else {\n      //     console.log(\"here!\")\n      //     imageSource = `<img src=\"https://i.ytimg.com/vi/oSQn4QK8QDY/maxresdefault.jpg\"  width=\"200\" \n      //  height=\"200\" border-radius: 50%;> </img> <br>`\n      //   }\n\n      const date = new Date();\n      let day = date.getDate();\n      let month = date.getMonth() + 1;\n      let year = date.getFullYear();\n\n      // This arrangement can be altered based on how we want the date's format to appear.\n      let currentDate = `${day}-${month}-${year}`;\n      console.log(currentDate); // \"17-6-2022\"\n\n      // let button_book = `\n\n      // let button = ` <div class='text-center'> <button type=\"button\" class=\"btn btn-outline-dark mt-3 px-5\">Book Now!</button> </div>`\n      let button = ` <div class='text-center'> <a href=\"https://www.google.ca/\" class=\"btn btn-primary btn-lg active\" role=\"button\" aria-pressed=\"true\">Primary link</a></div>`;\n      popupContent = popupContent + imageSource + button;\n      // + '<br>' + \"<img src='\" + \n      // 'https://images.unsplash.com/photo-1493134799591-2c9eed26201a?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8Y2l0eSUyMHNreWxpbmV8ZW58MHx8MHx8&w=1000&q=80' + \"'/>\";\n      marker.unbindPopup().bindPopup(popupContent, {\n        maxWidth: \"auto\",\n        maxHeight: \"auto\"\n      }).openPopup();\n    },\n    getValidImage: function (dest) {\n      let imageSource = `<img src=\"https://www.westjet.com/assets/wj-web/images/en/destination-defaults/square/${dest.toLowerCase()}-square.jpg\"  width=\"200\" \n     height=\"200\" border-radius: 50%;> </img> <br>`;\n      console.log(imageSource);\n      var url = `https://www.westjet.com/assets/wj-web/images/en/destination-defaults/square/${dest.toLowerCase()}-square.jpg`;\n      console.log(url);\n      function getStatus(url) {\n        var request = new XMLHttpRequest();\n        request.onreadystatechange = function () {\n          if (request.readyState === 4) {\n            request.status; //this contains the status code\n            if (request.status == 404) {\n              return \"rick\";\n            }\n          }\n        };\n        request.open(\"GET\", url, true);\n        request.send();\n      }\n      getStatus('/json');\n\n      //   function urlExists(url, callback) {\n      //     fetch(url, { mode: 'no-cors', method: 'head' })\n      //       .then(function (status) {\n      //         callback(status.ok)\n\n      //         console.log(status)\n      //       });\n      //   }\n\n      //  url = 'https://mapsengine.google.com/map/embed?mid=zGLD-nMIJQAg.k0gTyNlOPz_Q';\n      //   console.log(url)\n      //   urlExists(url, function (exists) {\n      //     if (exists) {\n      //       console.log(\"Rick\")\n      //     } else {\n      //       console.log(\"Morty\")\n      //     }\n      //   });\n    },\n\n    getPrice: async function (destination) {\n      let route = \"YYC\" + destination;\n      const axios = require('axios');\n      let price = \"\";\n      const params = new URLSearchParams();\n      params.append('o', 'YYC');\n      params.append('d', destination);\n      params.append('rangeStartOffset', '0');\n      params.append('rangeEndOffset', '60');\n      try {\n        const response = await axios.get('https://api.westjet.com/price-points/v1/retail', {\n          params: params,\n          headers: {\n            'accept': 'application/json'\n          }\n        });\n        price = response.data[route][0].price;\n        if (response.data[route][0].status === \"NO_SCHEDULES\") {\n          console.log(\"h\");\n          price = \"This is a seasonal route that is currently not being served.\";\n        }\n      } catch (error) {\n        console.log(error);\n        price = \"No price available.\";\n      }\n      console.log(price);\n      return price;\n    },\n    createMarker(dest) {\n      let wjIcon = L.icon({\n        iconUrl: this.icon,\n        iconSize: this.iconSize\n      });\n      //<l-tooltip> {{ dest.name }}, {{dest.countryName}} </l-tooltip>\n      let marker = L.marker(this.latLng(dest.latitude, dest.longitude), {\n        icon: wjIcon,\n        dest: dest\n      });\n      marker.bindTooltip(\"12\", {\n        permanent: true,\n        direction: 'top',\n        offset: [0, -17]\n      });\n      marker.on('click', this.openPopup);\n      marker.bindTooltip(`${dest.name}, ${dest.countryName}`);\n      return marker;\n    },\n    customTip() {\n      this.unbindTooltip();\n      if (!this.isPopupOpen()) this.bindTooltip('Short description').openTooltip();\n    },\n    customPop() {\n      this.unbindTooltip();\n    }\n  },\n  mounted() {\n    this.getLocation();\n    var map = L.map(\"map\").setView([47.313220, -1.319482], 4);\n    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png', {\n      minZoom: 4,\n      maxZoom: 8,\n      attribution: 'Maps <a href=&copy; https://www.thunderforest.com/>Thunderforest</a>, Data &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap Contributors</a>'\n    }).addTo(map);\n    let markers = L.markerClusterGroup();\n\n    // create a marker for each airport\n    for (let dest of this.dests) {\n      let marker = this.createMarker(dest);\n      markers.addLayer(marker);\n    }\n    map.addLayer(markers);\n    map.setMaxBounds([[-90, -180], [90, 180]]);\n  }\n};","map":{"version":3,"mappings":"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","names":["L","westjet","name","props","dests","Array","data","url","attribution","zoom","center","markerLatLngBob","icon","iconSize","searchQuery","noWrap","methods","latLng","lat","lng","getLocation","navigator","geolocation","getCurrentPosition","position","latitude","coords","longitude","search","index","toLowerCase","destination","includes","openPopup","e","marker","target","dest","options","price","getPrice","code","valid_image","getValidImage","popupContent","console","log","imageSource","date","Date","day","getDate","month","getMonth","year","getFullYear","currentDate","button","unbindPopup","bindPopup","maxWidth","maxHeight","getStatus","request","XMLHttpRequest","onreadystatechange","readyState","status","open","send","route","axios","require","params","URLSearchParams","append","response","get","headers","error","createMarker","wjIcon","iconUrl","bindTooltip","permanent","direction","offset","on","countryName","customTip","unbindTooltip","isPopupOpen","openTooltip","customPop","mounted","map","setView","tileLayer","minZoom","maxZoom","addTo","markers","markerClusterGroup","addLayer","setMaxBounds"],"sourceRoot":"","sources":["/Users/lucasion/Desktop/Capstone/WestJet-RouteMap/wjroutemap/src/components/DestMap.vue"],"sourcesContent":["<template>\n  <div style=\"height:1000px; width:1300px\">\n    <div id=\"map\" style=\"height:1000px; width:1300px\"></div>\n\n  </div>\n</template>\n  \n<script>\nimport \"leaflet/dist/leaflet.css\";\nimport * as L from 'leaflet';\nimport 'leaflet.markercluster';\nimport 'leaflet.markercluster/dist/MarkerCluster.css';\nimport 'leaflet.markercluster/dist/MarkerCluster.Default.css'\n\nimport westjet from '../assets/westjet.png';\n\nexport default {\n  name: 'DestMap',\n  props: {\n    dests: Array\n  },\n  // components: {\n  //   LMap,\n  //   LTileLayer,\n  //   LMarker,\n  //   LIcon,\n  //   LTooltip,\n  // },\n  data() {\n    return {\n      url: 'https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png',\n      attribution: '&copy; <a target=\"_blank\" href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n      zoom: 4,\n      center: [47.313220, -1.319482], //default\n      markerLatLngBob: [47.313220, -17.319482],\n      icon: westjet,\n      iconSize: [85, 50],\n      searchQuery: '',\n      noWrap: true,\n\n    };\n  },\n  methods: {\n    latLng: function (lat, lng) {\n      return [lat, lng]\n    },\n    getLocation: function () {\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition((position) => {\n          var latitude = position.coords.latitude;\n          var longitude = position.coords.longitude;\n          this.center = [latitude, longitude]\n        });\n      }\n    },\n    search(searchQuery, dests) {\n      for (var index in dests) {\n        var search = searchQuery.toLowerCase()\n        var destination = dests[index].name.toLowerCase()\n        if (destination.includes(search)) // search centers at the first substring result\n        {\n          this.center = [dests[index].latitude, dests[index].longitude]\n          return;\n        }\n      }\n    },\n    openPopup: async function (e) {\n      let marker = e.target\n      let dest = marker.options.dest\n      //console.log(marker.options.dest.code)\n      const price = await this.getPrice(dest.code);\n      const valid_image = await this.getValidImage(dest.code);\n\n      let popupContent = `<h1 class ='h6 text-center'> ${dest.name} <br> $${price} </h1> <br>`;\n      console.log(dest)\n\n      // console.log(this.getValidImage(dest.code))\n\n      \n\n\n\n\n\n\n      //   if (valid_image) {\n      //     console.log(\"here! boss\")\n         let imageSource = `<img src=\"https://www.westjet.com/assets/wj-web/images/en/destination-defaults/square/${dest.code.toLowerCase()}-square.jpg\"  width=\"200\" \n       height=\"200\" border-radius: 50%;> </img> <br>`\n      //   } else {\n      //     console.log(\"here!\")\n      //     imageSource = `<img src=\"https://i.ytimg.com/vi/oSQn4QK8QDY/maxresdefault.jpg\"  width=\"200\" \n      //  height=\"200\" border-radius: 50%;> </img> <br>`\n      //   }\n\n\n      const date = new Date();\n\nlet day = date.getDate();\nlet month = date.getMonth() + 1;\nlet year = date.getFullYear();\n\n// This arrangement can be altered based on how we want the date's format to appear.\nlet currentDate = `${day}-${month}-${year}`;\nconsole.log(currentDate); // \"17-6-2022\"\n\n        // let button_book = `\n\n\n      // let button = ` <div class='text-center'> <button type=\"button\" class=\"btn btn-outline-dark mt-3 px-5\">Book Now!</button> </div>`\n      let button = ` <div class='text-center'> <a href=\"https://www.google.ca/\" class=\"btn btn-primary btn-lg active\" role=\"button\" aria-pressed=\"true\">Primary link</a></div>`\n\n      \n      popupContent = popupContent + imageSource+ button\n      // + '<br>' + \"<img src='\" + \n      // 'https://images.unsplash.com/photo-1493134799591-2c9eed26201a?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8Y2l0eSUyMHNreWxpbmV8ZW58MHx8MHx8&w=1000&q=80' + \"'/>\";\n      marker.unbindPopup().bindPopup(popupContent,\n\n        { maxWidth: \"auto\", maxHeight: \"auto\" },\n\n\n\n\n      ).openPopup();\n\n    },\n    getValidImage: function (dest) {\n\n\n\n\n      let imageSource = `<img src=\"https://www.westjet.com/assets/wj-web/images/en/destination-defaults/square/${dest.toLowerCase()}-square.jpg\"  width=\"200\" \n     height=\"200\" border-radius: 50%;> </img> <br>`\n      console.log(imageSource)\n\n\n      var url = `https://www.westjet.com/assets/wj-web/images/en/destination-defaults/square/${dest.toLowerCase()}-square.jpg`;\n      console.log(url)\n\n      function getStatus(url) {\n        var request = new XMLHttpRequest();\n    request.onreadystatechange = function() {\n        if (request.readyState === 4){\n            request.status;//this contains the status code\n            if (request.status == 404){\nreturn \"rick\"\n            }\n        }\n    };\n        request.open(\"GET\", url, true);\n        request.send(); \n} \n\n\ngetStatus( '/json');\n\n    //   function urlExists(url, callback) {\n    //     fetch(url, { mode: 'no-cors', method: 'head' })\n    //       .then(function (status) {\n    //         callback(status.ok)\n\n\n    //         console.log(status)\n    //       });\n    //   }\n\n    //  url = 'https://mapsengine.google.com/map/embed?mid=zGLD-nMIJQAg.k0gTyNlOPz_Q';\n    //   console.log(url)\n    //   urlExists(url, function (exists) {\n    //     if (exists) {\n    //       console.log(\"Rick\")\n    //     } else {\n    //       console.log(\"Morty\")\n    //     }\n    //   });\n\n\n\n\n\n    },\n    getPrice: async function (destination) {\n\n      let route = \"YYC\" + destination\n\n      const axios = require('axios');\n\n      let price = \"\"\n\n      const params = new URLSearchParams();\n      params.append('o', 'YYC');\n      params.append('d', destination);\n      params.append('rangeStartOffset', '0');\n      params.append('rangeEndOffset', '60');\n\n      try {\n        const response = await axios.get('https://api.westjet.com/price-points/v1/retail', {\n          params: params,\n          headers: {\n            'accept': 'application/json'\n          }\n        });\n        price = response.data[route][0].price;\n        if (response.data[route][0].status === \"NO_SCHEDULES\") {\n          console.log(\"h\")\n          price = \"This is a seasonal route that is currently not being served.\"\n        }\n      } catch (error) {\n        console.log(error);\n        price = \"No price available.\";\n      }\n      console.log(price)\n      return price;\n    },\n    createMarker(dest) {\n      let wjIcon = L.icon({\n        iconUrl: this.icon,\n        iconSize: this.iconSize\n      });\n      //<l-tooltip> {{ dest.name }}, {{dest.countryName}} </l-tooltip>\n      let marker = L.marker(this.latLng(dest.latitude, dest.longitude), { icon: wjIcon, dest: dest });\n      marker.bindTooltip(\"12\", {\n        permanent: true,\n        direction: 'top',\n        offset: [0, -17],\n      });\n      marker.on('click', this.openPopup)\n      marker.bindTooltip(`${dest.name}, ${dest.countryName}`)\n\n      return marker;\n    },\n\n\n    customTip() {\n      this.unbindTooltip();\n      if (!this.isPopupOpen()) this.bindTooltip('Short description').openTooltip();\n    },\n\n    customPop() {\n      this.unbindTooltip();\n    }\n\n  },\n  mounted() {\n\n    this.getLocation();\n\n    var map = L.map(\"map\").setView([47.313220, -1.319482], 4);\n\n\n\n    L.tileLayer(\n      'https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png',\n      {\n        minZoom: 4,\n        maxZoom: 8,\n        attribution: 'Maps <a href=&copy; https://www.thunderforest.com/>Thunderforest</a>, Data &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap Contributors</a>',\n\n\n      }\n    ).addTo(map);\n\n    let markers = L.markerClusterGroup();\n\n    // create a marker for each airport\n    for (let dest of this.dests) {\n\n      let marker = this.createMarker(dest)\n      markers.addLayer(marker)\n\n    }\n\n    map.addLayer(markers);\n    map.setMaxBounds([[-90, -180], [90, 180]])\n  }\n};\n</script>\n  \n<style>\n.leaflet-container {\n  border-radius: 25px;\n}\n\n.search-overlay {\n  position: absolute;\n  top: 0;\n  left: -100px;\n  width: 75%;\n  height: 12%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 999;\n}\n\ninput[type=\"text\"] {\n  padding: 10px;\n  border-radius: 5px;\n  border: none;\n  outline: none;\n  font-size: 16px;\n  background-color: white;\n  width: 50%;\n}\n</style>\n\n    \n    "]},"metadata":{},"sourceType":"module","externalDependencies":[]}