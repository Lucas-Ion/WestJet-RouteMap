{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createStaticVNode as _createStaticVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createStaticVNode(\"<html><head><meta name=\\\"description\\\" content=\\\"Leaflet Template\\\"><title>Simple Map</title><meta name=\\\"viewport\\\" content=\\\"initial-scale=1.0\\\"><meta charset=\\\"utf-8\\\"><link rel=\\\"stylesheet\\\" href=\\\"https://unpkg.com/leaflet@1.3.1/dist/leaflet.css\\\" integrity=\\\"sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==\\\" crossorigin=\\\"\\\"><link rel=\\\"stylesheet\\\" href=\\\"https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.css\\\"><link rel=\\\"stylesheet\\\" href=\\\"https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.Default.css\\\"></head><body><div id=\\\"map\\\"></div></body></html>\", 1);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createCommentVNode(\"DOCTYPE html\"), _hoisted_1], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */);\n}","map":{"version":3,"mappings":";;;6DAEEA,mCAAe,EACfC,UAmBO","names":["_createCommentVNode","_hoisted_1"],"sourceRoot":"","sources":["/Users/lucasion/Desktop/Capstone/WestJet-RouteMap/wjroutemap/src/components/DestMap.vue"],"sourcesContent":["<template>\n  \n  <!DOCTYPE html>\n  <html>\n  \n  <head>\n    <meta name=\"description\" content=\"Leaflet Template\">\n    <title>Simple Map</title>\n    <meta name=\"viewport\" content=\"initial-scale=1.0\">\n    <meta charset=\"utf-8\">\n    <link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.3.1/dist/leaflet.css\" integrity=\"sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==\" crossorigin=\"\" />\n    <link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.css\" />\n    <link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.Default.css\" />\n  \n    <script src=\"https://unpkg.com/leaflet@1.3.1/dist/leaflet.js\" integrity=\"sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==\" crossorigin=\"\"></script>\n    <script src=\"https://unpkg.com/leaflet.markercluster@1.3.0/dist/leaflet.markercluster.js\"></script>\n  </head>\n  \n  <body>\n    <div id=\"map\"></div>\n  </body>\n  \n  </html>\n</template>\n  \n<script>\n  import L from 'leaflet';\n  import 'leaflet.markercluster';\n  \n\n  // const L = window['L'];\n\n  import {\n    LMap,\n    LTileLayer,\n    LMarker,\n    LIcon,\n    LTooltip\n  } from \"@vue-leaflet/vue-leaflet\";\n\n  \n  import westjet from '../assets/westjet.png';\n  export default {\n    name: 'DestMap',\n    props: {\n      dests: Array\n    },\n    components: {\n      // LMap,\n      // LTileLayer,\n      // LMarker,\n      // LIcon,\n      // LTooltip,\n    },\n    data() {\n      return {\n        url: 'https://tile.thunderforest.com/atlas/{z}/{x}/{y}.png?apikey=9b2313ed32304004a51c1494aedf88db',\n        attribution: '&copy; <a target=\"_blank\" href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n        zoom: 4,\n        center: [47.313220, -1.319482], //default\n        markerLatLngBob: [47.313220, -17.319482],\n        icon: westjet,\n        iconSize: [40, 25],\n        searchQuery: '',\n      };\n    },\n    methods: {\n      latLng: function(lat, lng) {\n        return [lat, lng]\n      },\n      getLocation: function() {\n        if (navigator.geolocation) {\n          navigator.geolocation.getCurrentPosition((position) => {\n            var latitude = position.coords.latitude;\n            var longitude = position.coords.longitude;\n            this.center = [latitude, longitude]\n          });\n        }\n      },\n      search(searchQuery, dests) {\n        for(var index in dests)\n        {\n          var search = searchQuery.toLowerCase()\n          var destination = dests[index].name.toLowerCase()\n          if(destination.includes(search)) // search centers at the first substring result\n          {\n            this.center = [dests[index].latitude, dests[index].longitude]\n            return;\n          }\n        }\n      },\n      openPopup: async function(dest, index) {\n        let marker = this.$refs.markers[index].leafletObject;\n        \n        const price = await this.getPrice(dest.code);\n\n        let popupContent = `You have selected ${dest.name}'s airport <br> Price: ${price}`;\n        marker.unbindPopup().bindPopup(popupContent).openPopup();\n\n      },\n      getPrice: async function (destination) {\n \n        let route = \"YYC\"+ destination\n\n        const axios = require('axios');\n\n        let price = \"\"\n\n        const params = new URLSearchParams();\n        params.append('o', 'YYC');\n        params.append('d', destination);\n        params.append('rangeStartOffset', '0');\n        params.append('rangeEndOffset', '60');\n\n        try{\n          const response = await axios.get('https://api.westjet.com/price-points/v1/retail', {\n            params: params,\n            headers: {\n              'accept': 'application/json'\n            }\n          });\n          price = response.data[route][0].price;\n        } catch(error) {\n          console.log(error);\n          price = \"No price available.\";\n        }\n\n        return price;\n      }\n    },\n    mounted() {\n      // this.getLocation();\n\n      // let markers = a.markerClusterGroup();\n      \n      // let map = this.$refs.map.leafletObject;\n\n      // for(let marker in (this.$refs.markers)) {\n      //   markers.addLayer(marker.leafletObject);\n      // }\n\n      // map.addLayer(markers);\n    \n      var addressPoints = [\n  [-37.8210922667, 175.2209316333, \"2\"],\n  [-37.8210819833, 175.2213903167, \"3\"],\n  [-37.8210881833, 175.2215004833, \"3A\"],\n  [-37.8211946833, 175.2213655333, \"1\"],\n  [-37.8209458667, 175.2214051333, \"5\"],\n  [-37.8208292333, 175.2214374833, \"7\"],\n  [-37.8325816, 175.2238798667, \"537\"],\n  [-37.8315855167, 175.2279767, \"454\"],\n  [-37.8096336833, 175.2223743833, \"176\"],\n  [-37.80970685, 175.2221815833, \"178\"],\n  [-37.8102146667, 175.2211562833, \"190\"],\n  [-37.8088037167, 175.2242227, \"156\"],\n  [-37.8112330167, 175.2193425667, \"210\"],\n  [-37.8116368667, 175.2193005167, \"212\"],\n  [-37.80812645, 175.2255449333, \"146\"],\n  [-37.8080231333, 175.2286383167, \"125\"],\n  [-37.8089538667, 175.2222222333, \"174\"],\n  [-37.8080905833, 175.2275400667, \"129\"]\n]\n\nvar map = L.map(this.$refs['mapElement']).setView([-37.82, 175.23], 13);\n\nL.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {\n  attribution: '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n}).addTo(map);\n\nvar markers = L.markerClusterGroup();\n\nfor (var i = 0; i < addressPoints.length; i++) {\n  var a = addressPoints[i];\n  var title = a[2];\n  var marker = L.marker(new L.LatLng(a[0], a[1]), {\n    title: title\n  });\n  marker.bindPopup(title);\n  markers.addLayer(marker);\n}\n\nmap.addLayer(markers);\n\n    }\n  };\n</script>\n  \n<style>\n  .leaflet-container {\n    border-radius: 25px;\n  }\n\n  .search-overlay {\n    position: absolute;\n    top: 0;\n    left: -100px;\n    width: 75%;\n    height: 12%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 999;\n  }\n\n  input[type=\"text\"] {\n    padding: 10px;\n    border-radius: 5px;\n    border: none;\n    outline: none;\n    font-size: 16px;\n    background-color: white;\n    width: 50%;\n  }\n\n</style>\n\n    \n    "]},"metadata":{},"sourceType":"module","externalDependencies":[]}