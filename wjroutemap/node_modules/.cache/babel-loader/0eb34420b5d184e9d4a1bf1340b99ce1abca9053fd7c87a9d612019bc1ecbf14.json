{"ast":null,"code":"import L from 'leaflet';\nimport 'leaflet.markercluster';\n\n// const L = window['L'];\n\nimport { LMap, LTileLayer, LMarker, LIcon, LTooltip } from \"@vue-leaflet/vue-leaflet\";\nimport westjet from '../assets/westjet.png';\nexport default {\n  name: 'DestMap',\n  props: {\n    dests: Array\n  },\n  components: {\n    // LMap,\n    // LTileLayer,\n    // LMarker,\n    // LIcon,\n    // LTooltip,\n  },\n  data() {\n    return {\n      url: 'https://tile.thunderforest.com/atlas/{z}/{x}/{y}.png?apikey=9b2313ed32304004a51c1494aedf88db',\n      attribution: '&copy; <a target=\"_blank\" href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n      zoom: 4,\n      center: [47.313220, -1.319482],\n      //default\n      markerLatLngBob: [47.313220, -17.319482],\n      icon: westjet,\n      iconSize: [40, 25],\n      searchQuery: ''\n    };\n  },\n  methods: {\n    latLng: function (lat, lng) {\n      return [lat, lng];\n    },\n    getLocation: function () {\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(position => {\n          var latitude = position.coords.latitude;\n          var longitude = position.coords.longitude;\n          this.center = [latitude, longitude];\n        });\n      }\n    },\n    search(searchQuery, dests) {\n      for (var index in dests) {\n        var search = searchQuery.toLowerCase();\n        var destination = dests[index].name.toLowerCase();\n        if (destination.includes(search))\n          // search centers at the first substring result\n          {\n            this.center = [dests[index].latitude, dests[index].longitude];\n            return;\n          }\n      }\n    },\n    openPopup: async function (dest, index) {\n      let marker = this.$refs.markers[index].leafletObject;\n      const price = await this.getPrice(dest.code);\n      let popupContent = `You have selected ${dest.name}'s airport <br> Price: ${price}`;\n      marker.unbindPopup().bindPopup(popupContent).openPopup();\n    },\n    getPrice: async function (destination) {\n      let route = \"YYC\" + destination;\n      const axios = require('axios');\n      let price = \"\";\n      const params = new URLSearchParams();\n      params.append('o', 'YYC');\n      params.append('d', destination);\n      params.append('rangeStartOffset', '0');\n      params.append('rangeEndOffset', '60');\n      try {\n        const response = await axios.get('https://api.westjet.com/price-points/v1/retail', {\n          params: params,\n          headers: {\n            'accept': 'application/json'\n          }\n        });\n        price = response.data[route][0].price;\n      } catch (error) {\n        console.log(error);\n        price = \"No price available.\";\n      }\n      return price;\n    }\n  },\n  mounted() {\n    // this.getLocation();\n\n    // let markers = a.markerClusterGroup();\n\n    // let map = this.$refs.map.leafletObject;\n\n    // for(let marker in (this.$refs.markers)) {\n    //   markers.addLayer(marker.leafletObject);\n    // }\n\n    // map.addLayer(markers);\n    var map = L.map(this.$refs['mapElement']).setView([51.505, -0.09], 13);\n    var addressPoints = [[-37.8210922667, 175.2209316333, \"2\"], [-37.8210819833, 175.2213903167, \"3\"], [-37.8210881833, 175.2215004833, \"3A\"], [-37.8211946833, 175.2213655333, \"1\"], [-37.8209458667, 175.2214051333, \"5\"], [-37.8208292333, 175.2214374833, \"7\"], [-37.8325816, 175.2238798667, \"537\"], [-37.8315855167, 175.2279767, \"454\"], [-37.8096336833, 175.2223743833, \"176\"], [-37.80970685, 175.2221815833, \"178\"], [-37.8102146667, 175.2211562833, \"190\"], [-37.8088037167, 175.2242227, \"156\"], [-37.8112330167, 175.2193425667, \"210\"], [-37.8116368667, 175.2193005167, \"212\"], [-37.80812645, 175.2255449333, \"146\"], [-37.8080231333, 175.2286383167, \"125\"], [-37.8089538667, 175.2222222333, \"174\"], [-37.8080905833, 175.2275400667, \"129\"]];\n    var map = L.map('map').setView([-37.82, 175.23], 13);\n    L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {\n      attribution: '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n    }).addTo(map);\n    var markers = L.markerClusterGroup();\n    for (var i = 0; i < addressPoints.length; i++) {\n      var a = addressPoints[i];\n      var title = a[2];\n      var marker = L.marker(new L.LatLng(a[0], a[1]), {\n        title: title\n      });\n      marker.bindPopup(title);\n      markers.addLayer(marker);\n    }\n    map.addLayer(markers);\n  }\n};","map":{"version":3,"mappings":"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","names":["L","LMap","LTileLayer","LMarker","LIcon","LTooltip","westjet","name","props","dests","Array","components","data","url","attribution","zoom","center","markerLatLngBob","icon","iconSize","searchQuery","methods","latLng","lat","lng","getLocation","navigator","geolocation","getCurrentPosition","position","latitude","coords","longitude","search","index","toLowerCase","destination","includes","openPopup","dest","marker","$refs","markers","leafletObject","price","getPrice","code","popupContent","unbindPopup","bindPopup","route","axios","require","params","URLSearchParams","append","response","get","headers","error","console","log","mounted","map","setView","addressPoints","tileLayer","addTo","markerClusterGroup","i","length","a","title","LatLng","addLayer"],"sourceRoot":"","sources":["/Users/lucasion/Desktop/Capstone/WestJet-RouteMap/wjroutemap/src/components/DestMap.vue"],"sourcesContent":["<template>\n  <div style=\"height:1000px; width:1300px\">\n    <div id=\"mapid\" ref=\"mapElement\"></div>\n    <!-- <l-map ref=\"map\" :zoom=\"zoom\" :center=\"center\" maxZoom=\"7\" minZoom=\"4\">\n      <div class=\"search-overlay\">\n        <input type=\"text\" placeholder=\"Search\" v-model=\"searchQuery\" @keyup.enter=\"search(searchQuery, dests)\">\n      </div>\n      <l-tile-layer url=\"https://tile.thunderforest.com/transport-dark/{z}/{x}/{y}.png?apikey=9b2313ed32304004a51c1494aedf88db\" layer-type=\"base\" name=\"OpenStreetMap\"></l-tile-layer>\n      <l-marker ref=\"markers\" :key=\"index\" v-for=\"(dest, index) in dests\" :lat-lng=\"latLng(dest.latitude, dest.longitude)\" @click=\"openPopup(dest, index)\">\n        <l-icon :icon-size=\"iconSize\" :icon-url=\"icon\"></l-icon>\n        <l-tooltip> {{ dest.name }}, {{dest.countryName}} </l-tooltip>\n      </l-marker>\n    </l-map> -->\n  </div>\n</template>\n  \n<script>\n  import L from 'leaflet';\n  import 'leaflet.markercluster';\n\n  // const L = window['L'];\n\n  import {\n    LMap,\n    LTileLayer,\n    LMarker,\n    LIcon,\n    LTooltip\n  } from \"@vue-leaflet/vue-leaflet\";\n\n  \n  import westjet from '../assets/westjet.png';\n  export default {\n    name: 'DestMap',\n    props: {\n      dests: Array\n    },\n    components: {\n      // LMap,\n      // LTileLayer,\n      // LMarker,\n      // LIcon,\n      // LTooltip,\n    },\n    data() {\n      return {\n        url: 'https://tile.thunderforest.com/atlas/{z}/{x}/{y}.png?apikey=9b2313ed32304004a51c1494aedf88db',\n        attribution: '&copy; <a target=\"_blank\" href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n        zoom: 4,\n        center: [47.313220, -1.319482], //default\n        markerLatLngBob: [47.313220, -17.319482],\n        icon: westjet,\n        iconSize: [40, 25],\n        searchQuery: '',\n      };\n    },\n    methods: {\n      latLng: function(lat, lng) {\n        return [lat, lng]\n      },\n      getLocation: function() {\n        if (navigator.geolocation) {\n          navigator.geolocation.getCurrentPosition((position) => {\n            var latitude = position.coords.latitude;\n            var longitude = position.coords.longitude;\n            this.center = [latitude, longitude]\n          });\n        }\n      },\n      search(searchQuery, dests) {\n        for(var index in dests)\n        {\n          var search = searchQuery.toLowerCase()\n          var destination = dests[index].name.toLowerCase()\n          if(destination.includes(search)) // search centers at the first substring result\n          {\n            this.center = [dests[index].latitude, dests[index].longitude]\n            return;\n          }\n        }\n      },\n      openPopup: async function(dest, index) {\n        let marker = this.$refs.markers[index].leafletObject;\n        \n        const price = await this.getPrice(dest.code);\n\n        let popupContent = `You have selected ${dest.name}'s airport <br> Price: ${price}`;\n        marker.unbindPopup().bindPopup(popupContent).openPopup();\n\n      },\n      getPrice: async function (destination) {\n \n        let route = \"YYC\"+ destination\n\n        const axios = require('axios');\n\n        let price = \"\"\n\n        const params = new URLSearchParams();\n        params.append('o', 'YYC');\n        params.append('d', destination);\n        params.append('rangeStartOffset', '0');\n        params.append('rangeEndOffset', '60');\n\n        try{\n          const response = await axios.get('https://api.westjet.com/price-points/v1/retail', {\n            params: params,\n            headers: {\n              'accept': 'application/json'\n            }\n          });\n          price = response.data[route][0].price;\n        } catch(error) {\n          console.log(error);\n          price = \"No price available.\";\n        }\n\n        return price;\n      }\n    },\n    mounted() {\n      // this.getLocation();\n\n      // let markers = a.markerClusterGroup();\n      \n      // let map = this.$refs.map.leafletObject;\n\n      // for(let marker in (this.$refs.markers)) {\n      //   markers.addLayer(marker.leafletObject);\n      // }\n\n      // map.addLayer(markers);\n      var map = L.map(this.$refs['mapElement']).setView([51.505, -0.09], 13);\n      var addressPoints = [\n  [-37.8210922667, 175.2209316333, \"2\"],\n  [-37.8210819833, 175.2213903167, \"3\"],\n  [-37.8210881833, 175.2215004833, \"3A\"],\n  [-37.8211946833, 175.2213655333, \"1\"],\n  [-37.8209458667, 175.2214051333, \"5\"],\n  [-37.8208292333, 175.2214374833, \"7\"],\n  [-37.8325816, 175.2238798667, \"537\"],\n  [-37.8315855167, 175.2279767, \"454\"],\n  [-37.8096336833, 175.2223743833, \"176\"],\n  [-37.80970685, 175.2221815833, \"178\"],\n  [-37.8102146667, 175.2211562833, \"190\"],\n  [-37.8088037167, 175.2242227, \"156\"],\n  [-37.8112330167, 175.2193425667, \"210\"],\n  [-37.8116368667, 175.2193005167, \"212\"],\n  [-37.80812645, 175.2255449333, \"146\"],\n  [-37.8080231333, 175.2286383167, \"125\"],\n  [-37.8089538667, 175.2222222333, \"174\"],\n  [-37.8080905833, 175.2275400667, \"129\"]\n]\n\nvar map = L.map('map').setView([-37.82, 175.23], 13);\n\nL.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {\n  attribution: '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n}).addTo(map);\n\nvar markers = L.markerClusterGroup();\n\nfor (var i = 0; i < addressPoints.length; i++) {\n  var a = addressPoints[i];\n  var title = a[2];\n  var marker = L.marker(new L.LatLng(a[0], a[1]), {\n    title: title\n  });\n  marker.bindPopup(title);\n  markers.addLayer(marker);\n}\n\nmap.addLayer(markers);\n\n    }\n  };\n</script>\n  \n<style>\n  .leaflet-container {\n    border-radius: 25px;\n  }\n\n  .search-overlay {\n    position: absolute;\n    top: 0;\n    left: -100px;\n    width: 75%;\n    height: 12%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 999;\n  }\n\n  input[type=\"text\"] {\n    padding: 10px;\n    border-radius: 5px;\n    border: none;\n    outline: none;\n    font-size: 16px;\n    background-color: white;\n    width: 50%;\n  }\n\n</style>\n\n    \n    "]},"metadata":{},"sourceType":"module","externalDependencies":[]}